[default]
input = /lcrc/group/e3sm2/ac.wlin/E3SMv3/AMIP/v3.LR.amip_0101
output = /lcrc/group/e3sm/ac.forsyth2/zppy_pr719_output/unique_id_22/v3.LR.amip_0101
www = /lcrc/group/e3sm/public_html/diagnostic_output/ac.forsyth2/zppy_pr719_output/unique_id_22
campaign = "water_cycle"
case = v3.LR.amip_0101
debug = True
environment_commands = "source /lcrc/soft/climate/e3sm-unified/load_latest_e3sm_unified_chrysalis.sh"
partition = debug #compute

[ts]
active = True
walltime = "00:10:00"
years = "2005:2015:5"

  [[ atm_monthly_180x360_aave ]]
  input_subdir = "archive/atm/hist"
  input_files = "eam.h0"
  frequency = "monthly"
  mapping_file = /home/ac.zender/data/maps/map_ne30pg2_to_cmip6_180x360_aave.20200201.nc
  # list for pcmdi diag, note: PHIS,hyam,hybm,hyai,hybi need to be included to process the 3D fields
  vars = "ICEFRAC,LANDFRAC,OCNFRAC,PSL,FSNTC,FSNTOAC,SWCF,LWCF,FLUT,FSNT,FSNTOA,FLNT,FLNTC,FSNS,FLNS,FSNS,SHFLX,QFLX,LHFLX,TAUX,TAUY,PRECC,PRECL,PRECSC,PRECSL,TS,TREFHT,U10,QREFHT,TMQ,CLDTOT,CLDHGH,CLDMED,CLDLOW,FLDS,FSDS,TGCLDIWP,TGCLDCWP,TGCLDLWP,FLNSC,FLUTC,FSDSC,SOLIN,FSNSC,AODABS,AODVIS,AODDUST,AREL,TREFMNAV,TREFMXAV,PS,PHIS,U,V,T,Z3"

[e3sm_to_cmip]
active = True
frequency = "monthly"
grid = "180x360_aave"
ts_grid = "180x360_aave"
ts_num_years=5
walltime = "00:10:00"
years = "2005:2015:5"

  [[ atm_monthly_180x360_aave ]]
  # list of variables to be interpolated to pressure level; see e3sm_to_cmip/vrt_remap_plev19.nc
  # This defaults to cmip_plevdata = string(default="inclusions/e3sm_to_cmip/vrt_remap_plev19.nc")
  # cmip_plevdata = /lcrc/group/e3sm/ac.szhang/acme_scratch/e3sm_project/zppy/zppy/templates/inclusions/e3sm_to_cmip/vrt_remap_plev19.nc
  input_files = "eam.h0"
  interp_vars = "U,V,T,Z3"
  ts_subsection = "atm_monthly_180x360_aave"
  vars = "ICEFRAC,LANDFRAC,OCNFRAC,PSL,FSNTC,FSNTOAC,SWCF,LWCF,FLUT,FSNT,FSNTOA,FLNT,FLNTC,FSNS,FLNS,FSNS,SHFLX,QFLX,LHFLX,TAUX,TAUY,PRECC,PRECL,PRECSC,PRECSL,TS,TREFHT,U10,QREFHT,TMQ,CLDTOT,CLDHGH,CLDMED,CLDLOW,FLDS,FSDS,TGCLDIWP,TGCLDCWP,TGCLDLWP,FLNSC,FLUTC,FSDSC,SOLIN,FSNSC,AODABS,AODVIS,AODDUST,AREL,TREFMNAV,TREFMXAV,PS,PHIS,U,V,T,Z3"

[pcmdi_diags]
active = True
multiprocessing = True
nodes = 1
num_workers = 24
#observational data
obs_ts = '/lcrc/soft/climate/e3sm_diags_data/obs_for_e3sm_diags/time-series'
pcmdi_debug = False
run_type = "model_vs_obs"
reference_data_path = ""
reference_data_path_ts = ""
ts_grid = "180x360_aave"
walltime = "4:00:00"
environment_commands = "source /lcrc/soft/climate/e3sm-unified/load_latest_e3sm_unified_chrysalis.sh"
environment_commands_secondary = "source /gpfs/fs1/home/ac.forsyth2/miniforge3/etc/profile.d/conda.sh; conda activate zi-pcmdi-diags-20250917"

  [[ mean_climate ]]
  active = True
  ##################################################################################
  #create rules to construct cmip-like datasets with a string constructed as
  #"mip.exp.product.realization", where "."is used as the delimiter (mandatary)
  ts_years = "2005-2014",
  ts_num_years = 5
  ref_years = "2005-2014",
  ref_start_yr = 1979
  ref_final_yr = 2018
  model_name = 'e3sm.amip.v3-LR.0101'
  model_tableID = 'Amon'
  ##################################################################################
  #location: /lcrc/group/e3sm/diagnostics/pcmdi_data/metrics_data/mean_climate/cmip6/amip
  cmip_clim_set = "cmip6.amip.v20250702"
  ##################################################################################
  #variables in current pcmdi-cmip list
  #note: rltcre and rstcre are derived variables as they are not included in cmip_ts
  vars = "pr,prw,psl,rlds,rldscs,rltcre,rstcre,rsus,rsuscs,rlus,rlut,rlutcs,rsds,rsdscs,rsdt,rsut,rsutcs,rtmt,sfcWind,tas,tauu,tauv,ts,ta-200,ta-850,ua-200,ua-850,va-200,va-850,zg-500"
  #default for all variables or specify source for each variable separately.
  obs_sets = "default"
  #see zppy/templates/pcmdi_diags/regions_specs.json for options of all regions
  #below is default setup for global/regional mean climate metrics
  regions = "global,ocean,land,NHEX,SHEX,TROPICS"
  target_grid = "2.5x2.5"
  target_grid_string = "2p5x2p5"

  [[ variability_modes_cpl ]]
  active = True
  ##################################################################################
  ts_years = "2005-2014",
  ts_num_years = 5
  ref_years = "2005-2014",
  ref_start_yr = 1870
  ref_final_yr = 2019
  #create rules to construct cmip-like datasets with a string constructed as
  #"mip.exp.product.realization", where "."is used as the delimiter (mandatary)
  model_name = 'e3sm.amip.v3-LR.0101'
  model_tableID = 'Amon'
  ##################################################################################
  #location: /lcrc/group/e3sm/diagnostics/pcmdi_data/metrics_data/variability_modes/cmip6/amip
  cmip_movs_set = "cmip6.amip.v20210119"
  ##################################################################################
  grid = '180x360_aave'
  vars = "ts"
  frequency = 'mo'
  ModUnitsAdjust = '(True,"subtract",273.15)'
  landmask = True
  #see zppy/templates/pcmdi_diags/reference_alias.json for options
  obs_sets = "alternate1" #"default"
  ObsUnitsAdjust = '(True,"subtract",273.15)'
  #name of modes varibility
  cpl_modes = "PDO,NPGO,AMO"
  #options specific for mode varibility metrics in pcmdi
  seasons = "yearly,monthly"
  figure_format = "png"

  [[ variability_modes_atm ]]
  active = True
  ##################################################################################
  ts_years = "2005-2014",
  ts_num_years = 5
  ref_years = "2005-2014",
  ref_start_yr = 1853
  ref_final_yr = 2015
  #create rules to construct cmip-like datasets with a string constructed as
  #"mip.exp.product.realization", where "." is used as the delimiter (mandatary)
  model_name = 'e3sm.amip.v3-LR.0101'
  model_tableID = 'Amon'
  ##################################################################################
  #location: /lcrc/group/e3sm/diagnostics/pcmdi_data/metrics_data/variability_modes/cmip6/amip
  cmip_movs_set = "cmip6.amip.v20210119"
  ##################################################################################
  grid = '180x360_aave'
  vars = "psl"
  landmask = False
  frequency = 'mo'
  ModUnitsAdjust = '(True,"divide",100.0)'
  #observational data
  obs_ts = '/lcrc/soft/climate/e3sm_diags_data/obs_for_e3sm_diags/time-series'
  #see zppy/templates/pcmdi_diags/reference_alias.json for options
  #default for all variables
  obs_sets = "alternate2" # "default"
  ObsUnitsAdjust = '(True,"divide",100.0)'
  #varibility modes
  atm_modes = "NAM,NAO,PNA,NPO,SAM,PSA1,PSA2"
  #options specific for mode varibility metrics in pcmdi
  seasons = "DJF,MAM,JJA,SON,yearly,monthly"
  figure_format = "png"

  [[ enso ]]
  active = True
  ##################################################################################
  ts_years = "2005-2014",
  ts_num_years = 5
  ref_years = "2005-2014",
  ref_start_yr = 1979
  ref_final_yr = 2018
  #create rules to construct cmip-like datasets with a string constructed as
  #"mip.exp.product.realization", where "."is used as the delimiter (mandatary)
  model_name = 'e3sm.amip.v3-LR.0101'
  model_tableID = 'Amon'
  ##################################################################################
  #location: /lcrc/group/e3sm/diagnostics/pcmdi_data/metrics_data/enso_metric/cmip6/historical
  #Note: there is no enso metric for CMIP6 AMIP, so use historical instead
  cmip_enso_set = "cmip6.historical.v20210620"
  ##################################################################################
  #see zppy/templates/pcmdi_diags/reference_alias.json for options
  customized_cmor_obs = True
  vars = "psl,pr,prsn,ts,tas,tauu,tauv,hfls,hfss,rlds,rsds,rlus,rlut,rsdt"
  # For enso, the obs_sets is explicitely set for each variable to ensure that
  # they are from the same source, below are setup to used ERA5 reanalysis.
  obs_sets = "default,alternate2,default,default,default,default,default,default,default,alternate2,alternate2,alternate2,alternate2,alternate2"
  #see zppy/templates/pcmdi_diags/reference_alias.json for options
  enso_groups = "ENSO_perf,ENSO_proc,ENSO_tel"
  figure_format = "png"

  [[ synthetic_plots ]]
  active = True
  model_name = 'e3sm.amip.v3-LR.0101'
  model_tableID = 'Amon'
  synthetic_sets = "portrait,parcoord"
  figure_sets = "mean_climate,variability_modes,enso_metric"
  figure_sets_period = "2005-2014,2005-2014,2005-2014"
  figure_format = "png"
