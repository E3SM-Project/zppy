# Do not edit any example cfg except for `example_generic.cfg`!

[default]
case = 20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis
environment_commands = "#expand environment_commands#"
input = #expand input#
input_subdir = archive/atm/hist
mapping_file = #expand mapping_file#
output = #expand output#
partition = #expand partition#
walltime = "02:00:00"
www = #expand www#

[climo]
active = True
years = "51:55:2", "51:55:4",

  [[ atm_monthly_180x360_aave ]]
  frequency = "monthly"

  [[ atm_monthly_diurnal_8xdaily_180x360_aave ]]
  frequency = "diurnal_8xdaily"
  input_files = "eam.h4"
  vars = "PRECT"

[ts]
active = True
frequency = "monthly"
years = "51:55:2",

  [[ atm_monthly_180x360_aave ]]
  input_files = "eam.h0"

  [[ atm_daily_180x360_aave ]]
  frequency = "daily"
  input_files = "eam.h1"
  vars = "PRECT"

  [[ atm_monthly_glb ]]
  input_files = "eam.h0"
  input_subdir = "archive/atm/hist"
  mapping_file = "glb"
  years = "51:61:5",

  [[ land_monthly ]]
  input_files = "elm.h0"
  input_subdir = "archive/lnd/hist"
  vars = "FSH,LAISHA,LAISUN,RH2M"

  [[ rof_monthly ]]
  extra_vars = 'areatotal2'
  input_files = "mosart.h0"
  input_subdir = "archive/rof/hist"
  mapping_file = ""
  vars = "RIVER_DISCHARGE_OVER_LAND_LIQ"

[tc_analysis]
active = True
scratch = #expand scratch#
years = "51:53:2",

[e3sm_diags]
active = True
grid = '180x360_aave'
obs_ts = #expand obs_ts#
ref_final_yr = 2014
ref_start_yr = 1985
reference_data_path = #expand reference_data_path#
short_name = '20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis'
ts_num_years = 2
years = "51:55:2", "51:55:4",

  [[ atm_monthly_180x360_aave ]]
  climo_diurnal_frequency = "diurnal_8xdaily"
  climo_diurnal_subsection = "atm_monthly_diurnal_8xdaily_180x360_aave"
  dc_obs_climo = "/compyfs/e3sm_diags_data/obs_for_e3sm_diags/climatology"
  sets = "lat_lon","zonal_mean_xy","zonal_mean_2d","polar","cosp_histogram","meridional_mean_2d","enso_diags","qbo","diurnal_cycle","annual_cycle_zonal_mean","streamflow", "zonal_mean_2d_stratosphere",
  streamflow_obs_ts = #expand streamflow_obs_ts#

  [[ atm_monthly_180x360_aave_tc_analysis ]]
  # Running as its own subtask because tc_analysis requires jobs to run sequentially, which slows down testing
  sets = "tc_analysis",
  tc_obs = #expand tc_obs#
  years = "51:53:2",

  [[ atm_monthly_180x360_aave_mvm ]]
  # Test model-vs-model using the same files as the reference
  climo_diurnal_frequency = "diurnal_8xdaily"
  climo_diurnal_subsection = "atm_monthly_diurnal_8xdaily_180x360_aave"
  climo_subsection = "atm_monthly_180x360_aave"
  diff_title = "Difference"
  gauges_path = #expand gauges_path#
  ref_final_yr = 52
  ref_name = "20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis"
  ref_start_yr = 51
  ref_years = "51-52",
  reference_data_path = #expand reference_data_path_mvm#
  reference_data_path_climo_diurnal = #expand reference_data_path_climo_diurnal#
  reference_data_path_tc = #expand reference_data_path_tc#
  reference_data_path_ts = #expand reference_data_path_ts#
  reference_data_path_ts_rof = #expand reference_data_path_ts_rof#
  run_type = "model_vs_model"
  short_ref_name = "20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis"
  swap_test_ref = False
  tag = "model_vs_model"
  ts_num_years_ref = 2
  ts_subsection = "atm_monthly_180x360_aave"

[mpas_analysis]
active = True
anomalyRefYear = 51
climo_years ="51-55", "56-61",
enso_years = "51-55", "56-61",
mesh = "EC30to60E2r2"
parallelTaskCount = 6
# Requires a longer time limit than permitted by "#expand partition#"
partition = #expand partition_mpas#
ts_years = "51-55", "51-61",

[global_time_series]
active = True
climo_years ="51-55", "56-61",
experiment_name = "20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis"
figstr = "20210528.v2rc3e.piControl.ne30pg2_EC30to60E2r2.chrysalis"
moc_file=mocTimeSeries_0051-0061.nc
ts_num_years = 5
ts_years = "51-55", "51-61",
years = "51-61",
